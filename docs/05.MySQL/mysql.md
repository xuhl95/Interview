# Mysql整理

## 目录

- mysql教程

- mysql体系结构

- 设计范式

- 索引
  - [MySQL中索引的语法](./索引.md)
  - 索引的优缺点
  - 索引的实现原理
  - 索引分类
  - [索引失效条件](#索引失效条件)
  - [什么时候需要创建索引](#什么时候需要创建索引)
  - [什么时候不需要创建索引](#什么时候不需要创建索引)
  - [联合索引(组合索引)](Mysql联合索引)
  - 索引优化
  - 聚集索引和非聚集索引区别
  
- Explain分析sql
  
- 锁

- 事务
  - 什么是事务
  - 事务隔离级
  - 两阶段提交
  - 分布式事务
  
- 存储引擎
  - Innodb
  
  - Myisam
  
  - Innodb和Myisam存储引擎区别
  
- mysql优化

- mysql复制
  - 主从复制
  - 半同步复制
  
### 索引失效条件

1、like 以%开头，索引无效；当like前缀没有%，后缀有%时，索引有效。

2、 or语句前后没有同时使用索引。当or左右查询字段只有一个是索引，该索引失效，只有当or左右查询字段均为索引时，才会生效

3、 组合索引，如果查询中没有用到联合索引的第一个字段，则不会走索引

4、数据类型出现隐式转化。如varchar不加单引号的话可能会自动转换为int型，使索引无效，产生全表扫描

5、 在索引列上使用 IS NULL 或 IS NOT NULL操作。索引是不索引空值的，所以这样的操作不能使用索引，可以用其他的办法处理，例如：数字类型，判断大于0，字符串类型设置一个默认值，判断是否等于默认值即可

6、 在索引字段上使用not，<>，!=。不等于操作符是永远不会用到索引的，因此对它的处理只会产生全表扫描。 优化方法： key<>0 改为 key>0 or key<0

7、对索引字段进行计算操作、字段上使用函数。（索引为 emp(ename,empno,sal)）

8、当全表扫描速度比索引速度快时，mysql会使用全表扫描，此时索引失效

扩展阅读 [《索引失效》](https://blog.csdn.net/wuseyukui/article/details/72312574)

扩展阅读 [《索引失效》](https://www.cnblogs.com/wdss/p/11186411.html)

### Mysql联合索引
扩展阅读 [《联合索引》](https://blog.csdn.net/wdjxxl/article/details/79790421)

### MySQL EXPLAIN 输出信息解读
扩展阅读 [《explain 输出信息解读》](https://www.cnblogs.com/wangfengming/articles/8275448.html)

### 什么时候需要创建索引

- 主键自动建立唯一索引

- 频繁作为查询条件的字段应该创建索引

- 查询中排序的字段创建索引将大大提高排序的速度（索引就是排序加快速查找

- 查询中统计或者分组的字段；

### 什么时候不需要创建索引

- 频繁更新的字段不适合创建索引，因为每次更新不单单是更新记录，还会更新索引，保存索引文件

- where条件里用不到的字段，不创建索引；

- 表记录太少，不需要创建索引；

- 经常增删改的表；

- 数据重复且分布平均的字段，因此为经常查询的和经常排序的字段建立索引。注意某些数据包含大量重复数据，因此他建立索引就没有太大的效果，例如性别字段，只有男女，不适合建立索引。