# Mysql整理

参考文章

[MyISAM与InnoDB的索引差异](https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&mid=2651961494&idx=1&sn=34f1874c1e36c2bc8ab9f74af6546ec5&chksm=bd2d0d4a8a5a845c566006efce0831e610604a43279aab03e0a6dde9422b63944e908fcc6c05&scene=21#wechat_redirect)

## 目录

- [mysql教程](#mysql教程)

- mysql体系结构

- [设计范式](#设计范式)

- 索引
  - [索引的实现原理](./mysql索引及实现原理.md)
  - [索引的优缺点](#索引的优缺点)
  - [索引分类](https://www.cnblogs.com/luyucheng/p/6289714.html)
  - [索引失效条件](#索引失效条件)
  - [什么时候需要创建索引](#什么时候需要创建索引)
  - [什么时候不需要创建索引](#什么时候不需要创建索引)
  - [联合索引(组合索引)](https://blog.csdn.net/wdjxxl/article/details/79790421)
  - [读完这篇彻底弄清楚MySQL优化问题](https://zhuanlan.zhihu.com/p/72855648)
  - 聚集索引和非聚集索引区别
  
- [Explain分析sql](https://www.cnblogs.com/wangfengming/articles/8275448.html)
  
- 锁

- 事务
  - 什么是事务
  - 事务隔离级
  - 两阶段提交
  - 分布式事务
  
- 存储引擎
  - Innodb
  
  - Myisam
  
  - Innodb和Myisam存储引擎区别
  
- mysql优化

- mysql复制
  - 主从复制
  - 半同步复制
  
  
  
### mysql教程
[mysql教程](https://www.w3cschool.cn/mysql/)

### 设计范式

- 第一范式(1NF)：要求数据库表的每一列都是不可分割的基本数据项，同一列中不能有多个值
- 第二范式(2NF)：唯一性约束，每条记录有唯一标示，所有的非主键字段均需依赖于主键字段
- 第三范式(3NF)：冗余性约束，非主键字段间不能相互依赖

  
### 索引的优缺点

#### 缺点

1.虽然索引大大提高了查询速度，同时却会降低更新表的速度，如对表进行insert、update和delete。因为更新表时，不仅要保存数据，还要保存一下索引文件。

2.建立索引会占用磁盘空间的索引文件。一般情况这个问题不太严重，但如果你在一个大表上创建了多种组合索引，索引文件的会增长很快。
索引只是提高效率的一个因素，如果有大数据量的表，就需要花时间研究建立最优秀的索引，或优化查询语句。

#### 优点
可以快速检索，减少I/O次数，加快检索速度；根据索引分组和排序，可以加快分组和排序
  
### 索引失效条件

1、like 以%开头，索引无效；当like前缀没有%，后缀有%时，索引有效。

2、 or语句前后没有同时使用索引。当or左右查询字段只有一个是索引，该索引失效，只有当or左右查询字段均为索引时，才会生效

3、 组合索引，如果查询中没有用到联合索引的第一个字段，则不会走索引

4、数据类型出现隐式转化。如varchar不加单引号的话可能会自动转换为int型，使索引无效，产生全表扫描

5、 在索引列上使用 IS NULL 或 IS NOT NULL操作。索引是不索引空值的，所以这样的操作不能使用索引，可以用其他的办法处理，例如：数字类型，判断大于0，字符串类型设置一个默认值，判断是否等于默认值即可

6、 在索引字段上使用not，<>，!=。不等于操作符是永远不会用到索引的，因此对它的处理只会产生全表扫描。 优化方法： key<>0 改为 key>0 or key<0

7、对索引字段进行计算操作、字段上使用函数。（索引为 emp(ename,empno,sal)）

8、当全表扫描速度比索引速度快时，mysql会使用全表扫描，此时索引失效

扩展阅读 [《索引失效》](https://blog.csdn.net/wuseyukui/article/details/72312574)

扩展阅读 [《索引失效》](https://www.cnblogs.com/wdss/p/11186411.html)

### Mysql联合索引
扩展阅读 [《联合索引》](https://blog.csdn.net/wdjxxl/article/details/79790421)

### MySQL EXPLAIN 输出信息解读
扩展阅读 [《explain 输出信息解读》](https://www.cnblogs.com/wangfengming/articles/8275448.html)

### 什么时候需要创建索引

- 主键自动建立唯一索引

- 频繁作为查询条件的字段应该创建索引

- 查询中排序的字段创建索引将大大提高排序的速度（索引就是排序加快速查找

- 查询中统计或者分组的字段；

### 什么时候不需要创建索引

- 频繁更新的字段不适合创建索引，因为每次更新不单单是更新记录，还会更新索引，保存索引文件

- where条件里用不到的字段，不创建索引；

- 表记录太少，不需要创建索引；

- 经常增删改的表；

- 数据重复且分布平均的字段，因此为经常查询的和经常排序的字段建立索引。注意某些数据包含大量重复数据，因此他建立索引就没有太大的效果，例如性别字段，只有男女，不适合建立索引。